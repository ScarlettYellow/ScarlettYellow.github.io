<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="en,zh-Hans,default">
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">



  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link href="/lib/pace/pace-theme-minimal.min.css?v=1.0.2" rel="stylesheet">







<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Database System," />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.2" />






<meta name="description" content="Abstract: 数据库系统概论期末复习笔记 ~">
<meta name="keywords" content="Database System">
<meta property="og:type" content="article">
<meta property="og:title" content="数据库系统概论复习笔记">
<meta property="og:url" content="http://ScarlettHuang.cn/2018/01/05/数据库系统概论复习笔记/index.html">
<meta property="og:site_name" content="Scarlett Huang | Blog">
<meta property="og:description" content="Abstract: 数据库系统概论期末复习笔记 ~">
<meta property="og:locale" content="en">
<meta property="og:image" content="https://pic002.cnblogs.com/images/2012/387401/2012071218044946.jpg">
<meta property="og:image" content="https://pic002.cnblogs.com/images/2012/387401/2012071218045660.png">
<meta property="og:image" content="https://pic002.cnblogs.com/images/2012/387401/2012071218390229.png">
<meta property="og:image" content="https://pic002.cnblogs.com/images/2012/387401/2012071218395286.jpg">
<meta property="og:image" content="https://pic002.cnblogs.com/images/2012/387401/2012071218534110.jpg">
<meta property="og:image" content="https://pic002.cnblogs.com/images/2012/387401/2012071218534923.jpg">
<meta property="og:image" content="https://pic002.cnblogs.com/images/2012/387401/2012071217530164.jpg">
<meta property="og:image" content="https://pic002.cnblogs.com/images/2012/387401/2012071217530712.png">
<meta property="og:image" content="https://pic002.cnblogs.com/images/2012/387401/2012071217202066.png">
<meta property="og:image" content="https://pic002.cnblogs.com/images/2012/387401/2012071218282650.jpg">
<meta property="og:image" content="https://pic002.cnblogs.com/images/2012/387401/2012071218321652.jpg">
<meta property="og:image" content="https://pic002.cnblogs.com/images/2012/387401/2012071309210683.jpg">
<meta property="og:image" content="https://pic002.cnblogs.com/images/2012/387401/2012071309212786.jpg">
<meta property="og:image" content="https://pic002.cnblogs.com/images/2012/387401/2012071309213446.png">
<meta property="og:image" content="https://pic002.cnblogs.com/images/2012/387401/2012071309220026.png">
<meta property="og:image" content="https://pic002.cnblogs.com/images/2012/387401/2012071309221268.jpg">
<meta property="og:image" content="https://pic002.cnblogs.com/images/2012/387401/2012071310033323.jpg">
<meta property="og:image" content="https://pic002.cnblogs.com/images/2012/387401/2012071310035119.png">
<meta property="og:image" content="https://pic002.cnblogs.com/images/2012/387401/2012071310041174.jpg">
<meta property="og:image" content="https://pic002.cnblogs.com/images/2012/387401/2012071310045018.jpg">
<meta property="og:image" content="https://pic002.cnblogs.com/images/2012/387401/2012071310053410.jpg">
<meta property="og:image" content="https://pic002.cnblogs.com/images/2012/387401/2012071310071619.jpg">
<meta property="og:image" content="https://pic002.cnblogs.com/images/2012/387401/2012071310074442.jpg">
<meta property="og:image" content="https://pic002.cnblogs.com/images/2012/387401/2012071310084580.jpg">
<meta property="og:image" content="https://pic002.cnblogs.com/images/2012/387401/2012071310094444.jpg">
<meta property="og:image" content="https://pic002.cnblogs.com/images/2012/387401/2012071310102032.png">
<meta property="og:image" content="https://pic002.cnblogs.com/images/2012/387401/2012071310110493.png">
<meta property="og:image" content="http://ofolh8dcq.bkt.clouddn.com/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%89%E5%85%A8%E6%80%A72.PNG">
<meta property="og:image" content="http://ofolh8dcq.bkt.clouddn.com/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%89%E5%85%A8%E6%80%A73.PNG">
<meta property="og:image" content="http://ofolh8dcq.bkt.clouddn.com/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%89%E5%85%A8%E6%80%A74.PNG">
<meta property="og:updated_time" content="2019-06-07T11:41:23.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="数据库系统概论复习笔记">
<meta name="twitter:description" content="Abstract: 数据库系统概论期末复习笔记 ~">
<meta name="twitter:image" content="https://pic002.cnblogs.com/images/2012/387401/2012071218044946.jpg">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.2',
    sidebar: {"position":"left","display":"always","offset":12,"offset_float":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://ScarlettHuang.cn/2018/01/05/数据库系统概论复习笔记/"/>





  <title>数据库系统概论复习笔记 | Scarlett Huang | Blog</title>
  




<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-141530033-1', 'auto');
  ga('send', 'pageview');
</script><!-- hexo-inject:begin --><!-- hexo-inject:end -->





</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="container sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Scarlett Huang | Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <h1 class="site-subtitle" itemprop="description"></h1>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-know-me">
          <a href="https://www.scarletthuang.cn" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            know me
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            Search
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="Searching..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://ScarlettHuang.cn/2018/01/05/数据库系统概论复习笔记/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Scarlett Huang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Scarlett Huang | Blog">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">数据库系统概论复习笔记</h2>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-01-05T17:05:18+08:00">
                2018-01-05
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Computer-Science/" itemprop="url" rel="index">
                    <span itemprop="name">Computer Science</span>
                  </a>
                </span>

                
                
                  , 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Computer-Science/Database-System/" itemprop="url" rel="index">
                    <span itemprop="name">Database System</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/01/05/数据库系统概论复习笔记/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2018/01/05/数据库系统概论复习笔记/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          
            <span class="post-meta-divider">|</span>
            <span class="page-pv"><i class="fa fa-file-o"></i>
            <span class="busuanzi-value" id="busuanzi_value_page_pv" ></span>
            </span>
          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>Abstract: 数据库系统概论期末复习笔记 ~<br><a id="more"></a></p>
<h1 id="Part1-数据库概述"><a href="#Part1-数据库概述" class="headerlink" title="Part1 数据库概述"></a>Part1 数据库概述</h1><p>关系模型的构成：关系数据结构、关系操作集合、关系完整性约束。</p>
<h2 id="1-1-数据库发展"><a href="#1-1-数据库发展" class="headerlink" title="1.1 数据库发展"></a>1.1 数据库发展</h2><p>1.数据库发展过程：</p>
<p><img src="https://pic002.cnblogs.com/images/2012/387401/2012071218044946.jpg" alt="数据库发展过程"></p>
<p>2.三个时期的比较：</p>
<p><img src="https://pic002.cnblogs.com/images/2012/387401/2012071218045660.png" alt="三个时期的比较"></p>
<h2 id="1-2-基本概念"><a href="#1-2-基本概念" class="headerlink" title="1.2 基本概念"></a>1.2 基本概念</h2><h3 id="1-数据模型"><a href="#1-数据模型" class="headerlink" title="1.数据模型"></a>1.数据模型</h3><p>三个要求：</p>
<ul>
<li>真实模拟现实社会</li>
<li>容易理解</li>
<li>便于在计算机上实现</li>
</ul>
<p>两类：</p>
<ul>
<li>概念模型：= 信息模型；<strong>面向用户</strong>，按用户的观点来对数据和信息建模，主要用于数据库设计</li>
<li>逻辑模型/物理模型：对数据最底层的抽象，描述数据在系统内部的表示方式和存取方式，<strong>面向计算机系统</strong>；包括层次模型，网状模型，关系模型，面向对象模型，对象关系模型</li>
</ul>
<p>三要素：</p>
<ul>
<li>数据结构</li>
<li>数据操作</li>
<li>数据的完整性约束条件</li>
</ul>
<p>常用数据模型：</p>
<ul>
<li>层次</li>
<li>网状</li>
<li>关系</li>
<li>面向对象</li>
<li>对象关系</li>
<li>半结构化</li>
</ul>
<h3 id="2-四个基本概念"><a href="#2-四个基本概念" class="headerlink" title="2.四个基本概念"></a>2.四个基本概念</h3><p>数据Data</p>
<p>数据库Database：长期储存在计算机内、有组织的、可共享的大量数据的集合。</p>
<p>人员数据视图:</p>
<p><img src="https://pic002.cnblogs.com/images/2012/387401/2012071218390229.png" alt="人员数据视图"></p>
<p>数据库结构图：</p>
<p><img src="https://pic002.cnblogs.com/images/2012/387401/2012071218395286.jpg" alt="数据库结构图"></p>
<p>基本特征：</p>
<ul>
<li>数据按一定数据模型组织、描述和储存</li>
<li>可为各种用户共享</li>
<li>冗余度较小</li>
<li>数据独立性较高</li>
<li>易扩展</li>
</ul>
<p>数据库管理系统DBMS：</p>
<ul>
<li>位于用户与操作系统之间的一层数据管理软件.是基础软件,是一个大型复杂的软件系统</li>
<li>用途：科学地组织和存储数据、高效地获取和维护数据</li>
<li><p>数据控制功能：</p>
<ul>
<li>数据的安全性（Security）保护:保护数据,以防止不合法的使用造成的数据的泄密和破坏.</li>
<li>数据的完整性（Integrity）检查:将数据控制在有效范围内,或保证数据之间满足一定关系</li>
<li>并发（Concurrency）控制:对多用户的并发操作加以控制和协调,防止相互干扰而得到错误的结果</li>
<li>数据库恢复（Recovery）:将数据库从错误状态恢复到某一已知的正确状态</li>
</ul>
</li>
<li><p>主要功能：数据定义，数据操纵（增删查改），数据控制（数据的完整性、安全性定义与检查数据库的并发控制与故障恢复），数据服务（拷贝、转储、重组、性能检测、分析……）</p>
</li>
</ul>
<p>数据库系统DBS：</p>
<ul>
<li>在计算机系统中引入数据库后的系统构成</li>
<li>组成：数据库，数据库管理系统，应用系统，数据库管理员</li>
<li>特点：数据结构化；数据的共享性高，冗余度低,易扩充；数据独立性高；数据由DBMS统一管理和控制</li>
</ul>
<h3 id="3-数据独立性（两个独立性）"><a href="#3-数据独立性（两个独立性）" class="headerlink" title="3.数据独立性（两个独立性）"></a>3.数据独立性（两个独立性）</h3><ul>
<li>物理独立性：指用户的应用程序与存储在磁盘上的数据库中数据是相互独立的.当数据的物理存储改变了,应用程序不用改变</li>
<li>逻辑独立性：指用户的应用程序与数据库的逻辑结构是相互独立的.数据的逻辑结构改变了,用户程序也可以不变</li>
<li>物理独立性与逻辑独立性保证了数据独立性也是由DBMS的二级映像功能来保证的</li>
</ul>
<h3 id="4-信息世界基本概念"><a href="#4-信息世界基本概念" class="headerlink" title="4.信息世界基本概念"></a>4.信息世界基本概念</h3><p>实体：客观存在并可相互区别的事物。可以是具体的人、事、物或抽象的概念。</p>
<p>属性：实体所具有的某一特性称为属性.一个实体可以由若干个属性来刻画。</p>
<p>码：唯一标识实体的属性集。</p>
<p>域(Domain)    属性的取值范围称为该属性的域。</p>
<p>实体型(Entity Type)    ：用实体名及其属性名集合来抽象和刻画同类实体称为实体型。</p>
<p>实体集(Entity Set)    同一类型实体的集合称为实体集</p>
<p>联系(Relationship)现实世界中事物内部以及事物之间的联系在信息世界中反映为实体内部的联系和实体之间的联系。</p>
<ul>
<li>实体内部的联系通常是指组成实体的各属性之间的联系</li>
<li>实体之间的联系通常是指不同实体集之间的联系</li>
</ul>
<p>A.两个实体型：</p>
<ul>
<li>一对一联系（1：1）：如果对于实体集A中的每一个实体,实体集B中至多有一个（也可以没有）实体与之联系,反之亦然,则称实体集A与实体集B具有一对一联系,记为1:1。</li>
<li>一对多联系（1：n）：一个班级中有若干名学生,每个学生只在一个班级中学习</li>
<li>多对多联系（m：n）：课程与学生之间的联系：一门课程同时有若干个学生选修,一个学生可以同时选修多门课程</li>
</ul>
<p><img src="https://pic002.cnblogs.com/images/2012/387401/2012071218534110.jpg" alt="联系名"></p>
<p>B.两个以上实体型：</p>
<p><img src="https://pic002.cnblogs.com/images/2012/387401/2012071218534923.jpg" alt="2+"></p>
<h3 id="5-数据库管理员的具体职责（DBA）"><a href="#5-数据库管理员的具体职责（DBA）" class="headerlink" title="5.数据库管理员的具体职责（DBA）"></a>5.数据库管理员的具体职责（DBA）</h3><ul>
<li>决定数据库中的信息内容和结构</li>
<li>决定数据库的存储结构和存取策略</li>
<li>定义数据的安全性要求和完整性约束条件</li>
<li><p>监控数据库的使用和运行</p>
<ul>
<li><p>周期性转储数据库</p>
<ul>
<li>数据文件</li>
<li>日志文件</li>
</ul>
</li>
<li><p>系统故障恢复</p>
</li>
<li>介质故障恢复</li>
<li>监视审计文件</li>
<li>数据库的改进和重组：性能监控和调优定期对数据库进行重组织,以提高系统的性能需求增加和改变时,数据库须需要重构造</li>
</ul>
</li>
</ul>
<h2 id="1-3-关系数据库理论"><a href="#1-3-关系数据库理论" class="headerlink" title="1.3 关系数据库理论"></a>1.3 关系数据库理论</h2><h3 id="1-关系模式（五元组）"><a href="#1-关系模式（五元组）" class="headerlink" title="1. 关系模式（五元组）"></a>1. 关系模式（五元组）</h3><ul>
<li>格式：R（U，D，DOM，F）</li>
<li>R：关系</li>
<li>U：属性</li>
<li>D：域</li>
<li>DOM：属性到域的映射</li>
<li>属性组U上的一组数据依赖F(如函数依赖(Functional Dependency,FD),多值依赖(Multivalued Dependency,MVD))</li>
</ul>
<h3 id="2-相关概念"><a href="#2-相关概念" class="headerlink" title="2. 相关概念"></a>2. 相关概念</h3><p>A.函数依赖：</p>
<ul>
<li>R(U)是属性集U上的关系模式.X,Y是U的子集.若R(U)的任意一个可能的关系r,r中不可能存在两个元组在X上的属性住相等,而在Y上的属性值不等,则X函数确定Y或Y依赖于X,记做X→Y,若X→Y,Y→X,记做X←→Y(非主属性中某属性值唯一)</li>
<li>非平凡函数依赖:X→Y,但X不包含Y,则称X→Y非平凡函数依赖(例子 (Sno,Cno)→Grade )</li>
<li>平凡函数依赖:X→Y,且X包含Y则称X→Y平凡函数依赖(例子 (Sno,Cno)→Cno )</li>
<li>完全函数依赖:X→Y且对X的任何一个真子集X’,都有X’→Y不成立,则称Y对X完全函数依赖(例子 (Sno,Cno)→Grade )</li>
<li>部分函数依赖:X→Y,但Y不完全依赖于X,则称Y对X部分函数依赖(例子 (Sno,Cno)→Sdept [由Sno便可推出Sdept] )</li>
<li>传递函数依赖:在R(U)中,如果X→Y,(X不包含Y),Y→X不成立,Y→Z,Z不属于Y,则称Z对X传递函数依赖,记做X→Z(例子 Sno→Sdept, Sdept→Mname成立,所以Sno→Mname)</li>
</ul>
<p>B.多值依赖：</p>
<p>定义:</p>
<ul>
<li>形式1:设R(U)是属性集U上的一个关系模式.X,Y,Z是U的子集,并且Z=U-X-Y,感谢模式R(U)中多值依赖X→→Y成立,当且仅当对R(U),的任一关系r,给定的一对(x,z)值,有一组Y的值,这组值仅仅决定于x值而与z值无关</li>
<li>形式2:在R(U)的任一关系r中,如果存在元组t,s使得t[X]=s[X],那么必然存在元组w,v属于r,(w,v可以与s,t相同),使得w[X]=v[X]=t[X],而w[Z]=v[Z]=t[Z],v[Y]=s[Y],v[Z]=t<a href="交换s,t元组的Y值所得的两个新元组必在r中">Z</a>则Y多值依赖与X记做X→→Y,这里X,Y是U的子集,Z=U-X-Y</li>
</ul>
<p>平凡多值依赖: 若X→→Y,而Z=φ,即Z为空,则称X→→Y为平凡多值依赖</p>
<p>多值依赖性质:</p>
<ul>
<li>多值依赖具有对称性.即若X→→Y,则X→→Z其中Z=U-X-Y</li>
<li>多值依赖具有传递性,即若X→→Y,X→→Z,则X→→Z - Y,X→→Y - Z</li>
<li>函数依赖可以看做多值依赖的特殊情况,即若X→Y则X→→Y.这是因为当X→Y时,对X的每一个值x,Y有一个确定的值y与之对应,所以X→→Y</li>
<li>若X→→Y,X→→Z,则X→→YZ</li>
<li>若X→→Y,X→→Z,则X→→Y∩Z</li>
</ul>
<p>多值依赖与函数依赖的区别:</p>
<ul>
<li>多值依赖的有效性与属性集的范围有关</li>
<li>若X→→Y在U上成立则在W(U包含W, W包含XY)上一定成立,反之则不然,即X→→Y在W(U包含W)上成立,在U上并不一定成立,这是因为多只依赖的定义中不仅涉及属性组X和Y,而且涉及U中的其余属性Z</li>
<li>一般得在R(U)上若有X→→Y在W(U包含W)上成立,则称X→→Y为R(U)的嵌入型多值依赖</li>
<li>但是在关系模式R(U)中函数依赖X→Y的有效性仅决定于X,Y这两个属性集的值.只要在R(U)的任何一个关系r中,元组在X和Y上的值满足函数依赖的定义,则函数依赖X→Y在任何属性集W(U包含W, W包含XY)上成立</li>
<li>若函数依赖X→Y在R(U)上成立,则对任何Y的子集Y’具有X→Y’成立,而多值依赖X→→Y若在R(U)上成立,却不能保证对于任何一个Y’ 即Y的子集的X→→Y’都成立</li>
</ul>
<p>码：</p>
<ul>
<li>候选码，主码：设K为R<u,f>中的属性组合,若K完全依赖于U则K为R的候选码(Candidate key),若候选码多于一个,则选定一个为主码(Primary key)。【唯一标识实体的属性或属性集为候选码，可以有多个；主码只能有一个；主码一定是候选码，候选码不一定是主码】</u,f></li>
<li>主属性，非主属性，全码：包含在任何一个候选码中的属性,称为主属性(Primary attribute).不包含在任何码中的属性称为非主属性(Nonprime attribute)或非码属性(Non-key attribute).最简单的情况,单个属性是码.最极端的情况,整个属性组都是码,称为全码(All-key)</li>
</ul>
<h3 id="3-模式存在问题"><a href="#3-模式存在问题" class="headerlink" title="3. 模式存在问题"></a>3. 模式存在问题</h3><ul>
<li>数据库冗余太大</li>
<li>更新异常</li>
<li>插入异常</li>
<li>删除异常</li>
</ul>
<h3 id="4-范式（规范化）"><a href="#4-范式（规范化）" class="headerlink" title="4.范式（规范化）"></a>4.范式（规范化）</h3><p>第一范式1NF：每一个分类必须是一个不可分的数据项,则属于第一范式规范。</p>
<p>2NF：若R属于1NF, 且存在非主属性完全函数依赖于码。</p>
<p>3NF：R属于2NF，且非主属性既不部分依赖于码，也不传递依赖于码。</p>
<p>BCNF：属于3NF，且多有属性都不部分依赖或传递依赖于码，所有决定属性集都包含码。</p>
<p>4NF：所有非平凡的多值依赖都是函数依赖。</p>
<p>5NF：连接依赖均由候选码所蕴含。</p>
<p><img src="https://pic002.cnblogs.com/images/2012/387401/2012071217530164.jpg" alt="范式包含关系"></p>
<p>范式规范化过程：</p>
<p><img src="https://pic002.cnblogs.com/images/2012/387401/2012071217530712.png" alt="范式规范化过程"></p>
<h2 id="1-4-关系模型"><a href="#1-4-关系模型" class="headerlink" title="1.4 关系模型"></a>1.4 关系模型</h2><h3 id="1-关系模型"><a href="#1-关系模型" class="headerlink" title="1.关系模型"></a>1.关系模型</h3><p>从用户角度看，关系模型中数据的逻辑结构时一张二维表，由行和列组成。</p>
<h3 id="2-相关概念-1"><a href="#2-相关概念-1" class="headerlink" title="2.相关概念"></a>2.相关概念</h3><ul>
<li>元组Tuple：表中的一行即为一个元组（包含不同属性集的值）</li>
<li>关系Relation：对应一张表；要求关系的每个分量都是不可分的数据项，不允许表中表</li>
<li>属性Attribute：表中的一列为一个属性</li>
<li>主码key：表中的某个属性组，可唯一确定一个元组</li>
<li>域domain：属性的取值范围</li>
<li>分量：元组中的一个属性值</li>
<li>关系模式：对关系的描述；关系名（属性1，属性2，…）</li>
</ul>
<h3 id="3-完整性约束"><a href="#3-完整性约束" class="headerlink" title="3.完整性约束"></a>3.完整性约束</h3><ul>
<li>作用：【约束】保证数据库中数据的正确性和相容性</li>
<li><p>包括：</p>
<ul>
<li><strong>域完整性约束：保证数据库字段取值的合理性</strong>；包括检查（CHECK）、默认值（DEFAULT）、不为空（NOT NULL）、外键（FOREIGN KEY）等约束。</li>
<li><strong>实体完整性(Entity integrity): 指关系的主关键字[主码]不能重复也不能取“空值</strong>“</li>
<li><strong>参照完整性</strong>: 定义建立关系之间联系的<strong>主关键字与外部关键字引用的约束条件</strong></li>
<li>用户定义的完整性(user defined integrity)：实体完整性和参照完整性适用于任何关系型数据库系统，它<strong>主要是针对关系的主关键字和外部关键字取值必须有效而做出的约束</strong>；用户定义的完整性是根据应用环境的要求和实际的需要，对某一具体应用所涉及的数据提出约束性条件，这一约束机制一般不应由应用程序提供，而应有由关系模型提供定义并检验，用户定义完整性主要包括<strong>字段有效性约束和记录有效性</strong>。</li>
</ul>
</li>
</ul>
<h3 id="4-关系模型的优缺点"><a href="#4-关系模型的优缺点" class="headerlink" title="4.关系模型的优缺点"></a>4.关系模型的优缺点</h3><p>优点：</p>
<ul>
<li>建立在严格的数学概念的基础上</li>
<li>概念单一: 实体和各类联系都用关系来表示；对数据的检索结果也是关系</li>
<li><strong>关系模型的存取路径对用户透明</strong>: 具有<strong>更高的数据独立性,更好的安全保密性</strong>；简化了程序员的工作和数据库开发建立的工作</li>
</ul>
<p>缺点：</p>
<ul>
<li>存取路径对用户透明导致<strong>查询效率往往不如非关系数据模型</strong></li>
<li><strong>为提高性能,必须对用户的查询请求进行优化增加了开发DBMS的难度</strong></li>
</ul>
<h3 id="5-系统结构解释"><a href="#5-系统结构解释" class="headerlink" title="5.系统结构解释"></a>5.系统结构解释</h3><p><strong>从数据库管理系统角度看</strong>数据库系统通常采用<strong>三级模式</strong>结构,是数据库<strong>系统内部的系统结构</strong>。</p>
<p>从<strong>数据库最终用户角度</strong>看(数据库系统<strong>外部的体系结构</strong>),数据库系统的结构分为:</p>
<ul>
<li>单用户结构主从式结构</li>
<li>分布式结构</li>
<li>客户／服务器</li>
<li>浏览器／应用服务器／数据库服务器多层结构等</li>
</ul>
<h3 id="6-实例instance"><a href="#6-实例instance" class="headerlink" title="6.实例instance"></a>6.实例instance</h3><ul>
<li>模式的一个具体值</li>
<li>反映数据库某一时刻的状态</li>
<li>同一个模式可以有很多实例</li>
<li>实例随数据库中的数据的更新而变动</li>
</ul>
<h3 id="7-模式Schema（又称：逻辑模式）"><a href="#7-模式Schema（又称：逻辑模式）" class="headerlink" title="7.模式Schema（又称：逻辑模式）"></a>7.模式Schema（又称：逻辑模式）</h3><p>解释：</p>
<ul>
<li>模式：<strong>数据库中全体数据的逻辑结构和特征的描述</strong></li>
<li>反映：数据的逻辑结构及其联系</li>
<li><strong>所有用户的公共数据视图，综合所有用户的需求</strong></li>
</ul>
<p>说明：一个数据库只有一个模式</p>
<p>地位：数据库系统模式结构的中间层</p>
<p>特点：</p>
<ul>
<li>与数据的物理存储细节和硬件环境无关</li>
<li>与具体的应用程序、开发工具个高级程序设计语言无关</li>
</ul>
<p>定义：</p>
<ul>
<li>数据的逻辑结构（数据项的名称、类型、取值范围等）</li>
<li>数据之间的联系</li>
<li>数据有关的安全性、完整性要求</li>
</ul>
<h3 id="8-外模式-External-Schema"><a href="#8-外模式-External-Schema" class="headerlink" title="8.外模式(External Schema)"></a>8.外模式(External Schema)</h3><p>说明：</p>
<ul>
<li><strong>数据库用户</strong>（包括应用程序员和终端用户）使用的<strong>局部数据的逻辑结构</strong>和特征的描述</li>
<li><strong>数据库用户的数据视图</strong>，是<strong>与某一应用有关</strong>的数据的逻辑表示</li>
</ul>
<p>地位：介于模式与内模式之间</p>
<p>模式与外模式的关系：一对多</p>
<ul>
<li><strong>外模式是模式的子集</strong></li>
<li>一个数据库可以有多个外模式，反映不同用户的应用需求、看待数据的方式、对数据保密的要求</li>
<li>对模式中同一数据，在外模式中的结构、类型、长度、保密级别都可以不同</li>
</ul>
<p>外模式与应用的关系：一对多</p>
<ul>
<li><strong>同一外模式也可以为某一用户的多个应用系统所使用</strong></li>
<li>但<strong>一个应用程序只能使用一个外模式</strong></li>
</ul>
<p>用途:</p>
<ul>
<li>保证数据库安全性的一个有力措施</li>
<li>每个用户只能看见和访问所对应的外模式中的数据</li>
</ul>
<h3 id="9-内模式（internal-schema，又称存储模式）"><a href="#9-内模式（internal-schema，又称存储模式）" class="headerlink" title="9.内模式（internal schema，又称存储模式）"></a>9.内模式（internal schema，又称存储模式）</h3><p>说明：</p>
<ul>
<li>是数据物理结构和存储方式的描述</li>
<li>一个数据库只有一个内模式</li>
<li><p>是数据在数据库内部的表示方式：</p>
<ul>
<li>记录的存储方式：顺序存储，hash存储等</li>
<li>索引的组织方式</li>
<li>数据是否压缩存储</li>
<li>数据是否加密</li>
<li>数据存储记录结果的规定</li>
</ul>
</li>
</ul>
<h3 id="10-三级模式结构（数据库系统的系统结构）"><a href="#10-三级模式结构（数据库系统的系统结构）" class="headerlink" title="10.三级模式结构（数据库系统的系统结构）"></a>10.三级模式结构（数据库系统的系统结构）</h3><p>组成：内模式，模式，外模式</p>
<p><img src="https://pic002.cnblogs.com/images/2012/387401/2012071217202066.png" alt="三级模式结构"></p>
<p>同一个模式可以有任意多个外模式</p>
<p>每一个外模式,数据库系统都有一个<strong>外模式／模式映象</strong>,定义外模式与模式之间的对应关系</p>
<h3 id="11-二级映象"><a href="#11-二级映象" class="headerlink" title="11.二级映象"></a>11.二级映象</h3><p>作用：二级映像在DBMS内部<strong>实现这三个抽象层次的联系和转换</strong>。</p>
<p>说明：映象定义通常包含在各自外模式的描述中</p>
<p>外模式/模式映像：</p>
<ul>
<li>作用：保证数据的逻辑独立性</li>
<li><p>说明：</p>
<ul>
<li>外模式描述的是数据的局部逻辑结构</li>
<li>模式描述的是数据的全局逻辑结构</li>
<li>当模式改变时,数据库管理员<strong>修改有关的外模式／模式映象,使外模式保持不变</strong>，应用程序是依据数据的外模式编写的,从而应用程序不必修改,<strong>保证了数据与程序的逻辑独立性</strong>,简称数据的逻辑独立性</li>
</ul>
</li>
</ul>
<p>模式／内模式映像:</p>
<ul>
<li>作用:<br>保证数据的物理独立性</li>
<li>说明: 当数据库的存储结构改变了（例如选用了另一种存储结构）,数据库管理员<strong>修改模式／内模式映象,使模式保持不变</strong>，应用程序不受影响.<strong>保证了数据与程序的物理独立性</strong>,简称数据的物理独立性</li>
</ul>
<h3 id="12-触发器"><a href="#12-触发器" class="headerlink" title="12 触发器"></a>12 触发器</h3><p>触发器又叫做事件-条件-动作（event-condition-action）规则。当特定的系统事件发生时，对规则的条件进行检查，如果条件成立则执行规则中的动作，否则不执行该动作。规则中的动作体可以很复杂，通常是一段SQL存储过程。</p>
<p>触发器类型</p>
<ul>
<li>行级触发器（FOR EACH ROW）</li>
<li>语句级触发器（FOR EACH STATEMENT）</li>
</ul>
<p>激活触发器</p>
<ul>
<li>触发器的执行，是由触发事件激活的，并由数据库服务器自动执行<br>一个数据表上可能定义了多个触发器，遵循如下的执行顺序:</li>
</ul>
<p>（1） 执行该表上的BEFORE触发器;<br>（2） 激活触发器的SQL语句;<br>（3） 执行该表上的AFTER触发器。</p>
<h2 id="1-5-SQL概述"><a href="#1-5-SQL概述" class="headerlink" title="1.5 SQL概述"></a>1.5 SQL概述</h2><h3 id="1-SQL的特点"><a href="#1-SQL的特点" class="headerlink" title="1.SQL的特点"></a>1.SQL的特点</h3><p>综合统一：</p>
<ul>
<li>集<strong>数据定义</strong>语言（DDL）,<strong>数据操纵</strong>语言（DML）,<strong>数据控制</strong>语言（DCL）功能于一体</li>
<li><p>可以独立完成数据库生命周期中的全部活动：</p>
<ul>
<li>定义关系模式,插入数据,建立数据库；</li>
<li>对数据库中的数据进行查询和更新；</li>
<li>数据库重构和维护</li>
<li>数据库安全性、完整性控制等</li>
</ul>
</li>
<li><p>用户数据库投入运行后,可根据需要随时逐步修改模式,不影响数据的运行</p>
</li>
<li>数据操作符统一</li>
</ul>
<p>高度非过程化：</p>
<ul>
<li>非关系数据模型的数据操纵语言“面向过程”,必须指定存取路径</li>
<li>SQL只要提出“做什么”,无须了解存取路径</li>
<li>存取路径的选择以及SQL的操作过程由系统自动完成</li>
</ul>
<p>面向集合的操作方式：</p>
<ul>
<li>非关系数据模型采用面向记录的操作方式,操作对象是一条记录</li>
<li>SQL采用集合操作方式: 操作对象、查找结果可以是元组的集合；一次插入、删除、更新操作的对象可以是元组的集合</li>
</ul>
<p>以同一种语法结构提供多种使用方式：</p>
<ul>
<li>SQL是独立的语言:能够独立地用于联机交互的使用方式</li>
<li>SQL又是嵌入式语言:SQL能够嵌入到高级语言（例如C,C++,Java）程序中,供程序员设计程序时使用</li>
</ul>
<p>语言简洁，易学易用：SQL功能极强,完成核心功能只用了9个动词</p>
<h3 id="2-SQL的数据定义功能"><a href="#2-SQL的数据定义功能" class="headerlink" title="2.SQL的数据定义功能"></a>2.SQL的数据定义功能</h3><p><img src="https://pic002.cnblogs.com/images/2012/387401/2012071218282650.jpg" alt="SQL的数据定义语句"></p>
<h3 id="3-三个基本概念"><a href="#3-三个基本概念" class="headerlink" title="3.三个基本概念"></a>3.三个基本概念</h3><p>1.基本表：</p>
<ul>
<li>本身独立存在的表<br>SQL中一个关系就对应一个基本表<br>一个(或多个)基本表对应一个存储文件<br>一个表可以带若干索引</li>
</ul>
<p>2.存储文件:</p>
<ul>
<li>逻辑结构组成了关系数据库的内模式</li>
<li>物理结构是任意的,对用户透明</li>
</ul>
<p>3.视图:</p>
<ul>
<li>从一个或几个基本表导出的表</li>
<li><strong>数据库中只存放视图的定义而不存放视图对应的数据</strong></li>
<li><strong>视图是一个虚表</strong></li>
<li>用户可以在视图上再定义视图</li>
</ul>
<h3 id="4-SQL支持关系数据库三级模式结构"><a href="#4-SQL支持关系数据库三级模式结构" class="headerlink" title="4.SQL支持关系数据库三级模式结构"></a>4.SQL支持关系数据库三级模式结构</h3><p><img src="https://pic002.cnblogs.com/images/2012/387401/2012071218321652.jpg" alt="SQL支持关系数据库三级模式结构"></p>
<h3 id="5-标识符"><a href="#5-标识符" class="headerlink" title="5.标识符"></a>5.标识符</h3><p>定义：由用户定义的可识别的字符序列；标识某个实体的一个符号</p>
<p>规则:</p>
<ul>
<li>第一个字符必须是字母或下划线（_）或@或#；</li>
<li>后续字符可以是：字母、数字、_、#、$、@等；</li>
</ul>
<p>注意: 不能使用SQL中的关键字和运算符,不允许嵌入空格或其他特殊字符</p>
<h1 id="Part2-数据库设计"><a href="#Part2-数据库设计" class="headerlink" title="Part2 数据库设计"></a>Part2 数据库设计</h1><h2 id="2-1-总体设计过程"><a href="#2-1-总体设计过程" class="headerlink" title="2.1 总体设计过程"></a>2.1 总体设计过程</h2><h3 id="1-数据库设计步骤"><a href="#1-数据库设计步骤" class="headerlink" title="1.数据库设计步骤"></a>1.数据库设计步骤</h3><p><img src="https://pic002.cnblogs.com/images/2012/387401/2012071309210683.jpg" alt="数据库设计步骤"></p>
<p><img src="https://pic002.cnblogs.com/images/2012/387401/2012071309212786.jpg" alt="数据库设计步骤2"></p>
<h3 id="2-设计描述"><a href="#2-设计描述" class="headerlink" title="2.设计描述"></a>2.设计描述</h3><p><img src="https://pic002.cnblogs.com/images/2012/387401/2012071309213446.png" alt="设计描述"></p>
<p><img src="https://pic002.cnblogs.com/images/2012/387401/2012071309220026.png" alt="数据库设计3"></p>
<h3 id="3-数据库设计的特点"><a href="#3-数据库设计的特点" class="headerlink" title="3.数据库设计的特点"></a>3.数据库设计的特点</h3><p><img src="https://pic002.cnblogs.com/images/2012/387401/2012071309221268.jpg" alt="数据库设计的特点"></p>
<h2 id="2-2-需求分析"><a href="#2-2-需求分析" class="headerlink" title="2.2 需求分析"></a>2.2 需求分析</h2><h3 id="1-分析和表达用户需求"><a href="#1-分析和表达用户需求" class="headerlink" title="1.分析和表达用户需求"></a>1.分析和表达用户需求</h3><p>首先把任何一个系统都抽象为：</p>
<p><img src="https://pic002.cnblogs.com/images/2012/387401/2012071310033323.jpg" alt="抽象"></p>
<p>分解处理功能和数据:</p>
<ul>
<li>分解处理功能: 将处理功能的具体内容分解为若干子功能</li>
<li>分解数据: 处理功能逐步分解同时,逐级分解所用数据,形成若干层次的数据流图</li>
<li><p>表达方法:</p>
<ul>
<li>处理逻辑：用判定表或判定树来描述</li>
<li>数据：用数据字典来描述</li>
</ul>
</li>
<li><p>将分析结果再次提交给用户,征得用户的认可</p>
</li>
</ul>
<h3 id="2-任务"><a href="#2-任务" class="headerlink" title="2.任务"></a>2.任务</h3><p>通过调查,收集与分析数据,获得用户对数据要求:</p>
<ul>
<li>信息要求: 指用户需要从数据库中获得信息的内容与性质,再由信息要求导出数据要求</li>
<li>处理要求: 指用户要完成什么处理功能,对初一响应时间有什么要求,处理方式是批处理还是联机处理</li>
<li>安全性与完整性要求</li>
</ul>
<h3 id="3-需求分析过程"><a href="#3-需求分析过程" class="headerlink" title="3.需求分析过程"></a>3.需求分析过程</h3><p><img src="https://pic002.cnblogs.com/images/2012/387401/2012071310035119.png" alt="需求分析过程"></p>
<h3 id="4-数据流图"><a href="#4-数据流图" class="headerlink" title="4.数据流图"></a>4.数据流图</h3><p>符号说明：</p>
<p><img src="https://pic002.cnblogs.com/images/2012/387401/2012071310041174.jpg" alt="符号说明"></p>
<p>例子：</p>
<p><img src="https://pic002.cnblogs.com/images/2012/387401/2012071310045018.jpg" alt="示例"></p>
<p>数据字典：</p>
<ul>
<li><p>与数据流图的区别</p>
<ul>
<li>数据流图 — 表达了数据和处理的关系</li>
<li>数据字典 — 则是系统中各类数据描述的集合</li>
</ul>
</li>
</ul>
<h2 id="2-3-概念结构设计"><a href="#2-3-概念结构设计" class="headerlink" title="2.3 概念结构设计"></a>2.3 概念结构设计</h2><h3 id="1-四类方法"><a href="#1-四类方法" class="headerlink" title="1.四类方法"></a>1.四类方法</h3><p><img src="https://pic002.cnblogs.com/images/2012/387401/2012071310053410.jpg" alt="信息世界-概念结构"></p>
<p>1.自顶向下: 即首先定义全局概念结构的框架,然后逐步细化</p>
<p><img src="https://pic002.cnblogs.com/images/2012/387401/2012071310071619.jpg" alt="自顶向下"></p>
<p>2.自底向上：即首先定义个局部应用的概念结构,然后将他们集合起来,得到全局概念</p>
<p><img src="https://pic002.cnblogs.com/images/2012/387401/2012071310074442.jpg" alt="自底向上"></p>
<p>3.逐步扩展：首先定义最重要的核心概念结构,然后向外扩充,以滚球的方法逐步生成其他概念结构,直至总体概念结构</p>
<p><img src="https://pic002.cnblogs.com/images/2012/387401/2012071310084580.jpg" alt="逐步扩展"></p>
<p>4.混合策略：即将自顶向下和自底向上相结合,用自顶向下策略设计一个全局概念结构框架,以它为骨架集成由底向上策略中设计的个局部概念结构</p>
<p><img src="https://pic002.cnblogs.com/images/2012/387401/2012071310094444.jpg" alt="混合策略"></p>
<h3 id="3-三种抽象"><a href="#3-三种抽象" class="headerlink" title="3.三种抽象"></a>3.三种抽象</h3><p>1.分类classification：</p>
<ul>
<li>定义某一类概念作为现实世界中一组对象的类型</li>
<li>抽象了对象值和型之间的“is member of”的语义</li>
</ul>
<p>2.聚集aggregation：</p>
<ul>
<li>定义某一类型的组成成分</li>
<li>抽象了对象内部类型和成分之间“is part of”的语义</li>
<li>复杂的聚集,某一类型的成分仍是一个聚集</li>
</ul>
<p><img src="https://pic002.cnblogs.com/images/2012/387401/2012071310102032.png" alt="聚集-图例"></p>
<p>3.E-R图：</p>
<p>任务:</p>
<ul>
<li>将各局部应用涉及的数据分别从数据字典中抽取出来</li>
<li>参照数据流图,标定各局部应用中的实体、实体的属性、标识实体的码</li>
<li>确定实体之间的联系及其类型（1:1,1:n,m:n）</li>
</ul>
<p>两条准则:</p>
<ul>
<li>属性不能再具有需要描述的性质.即属性必须是不可分的数据项,不能再由另一些属性组成</li>
<li>属性不能与其他实体具有联系.联系只发生在实体之间</li>
</ul>
<h2 id="2-4-逻辑结构设计"><a href="#2-4-逻辑结构设计" class="headerlink" title="2.4 逻辑结构设计"></a>2.4 逻辑结构设计</h2><h3 id="1-E-R图与关系模型转换"><a href="#1-E-R图与关系模型转换" class="headerlink" title="1.E-R图与关系模型转换"></a>1.E-R图与关系模型转换</h3><ul>
<li>转换内容: 将实体、实体的属性和实体之间的联系转换为关系模式</li>
<li>转换原则: 一个实体转换为一个关系模式；实体的属性即为关系的属性；实体的码即为关系的码</li>
</ul>
<h3 id="2-E-R图实体型间的联系有以下不同情况"><a href="#2-E-R图实体型间的联系有以下不同情况" class="headerlink" title="2.E-R图实体型间的联系有以下不同情况"></a>2.E-R图实体型间的联系有以下不同情况</h3><ul>
<li>一个1:1联系可以转换为一个独立的关系模式,也可以与任意一端对应的关系模式合并: 转换为一个独立的关系模式；与某一端实体对应的关系模式合并</li>
<li>一个1:n联系可以转换为一个独立的关系模式,也可以与n端对应的关系模式合并: 转换为一个独立的关系模式；与n端对应的关系模式合并</li>
<li>一个m:n联系转换为一个关系模式：三个或三个以上实体间的一个多元联系转换为一个关系模式</li>
<li><p>具有相同码的关系模式可合并:</p>
<ul>
<li>目的：减少系统中的关系个数</li>
<li>合并方法： 将其中一个关系模式的全部属性加入到另一个关系模式中,然后去掉其中的同义属性（可能同名也可能不同名）,并适当调整属性的次序</li>
</ul>
</li>
</ul>
<h3 id="3-优化数据模型方法"><a href="#3-优化数据模型方法" class="headerlink" title="3.优化数据模型方法"></a>3.优化数据模型方法</h3><ul>
<li>确定数据依赖</li>
<li>对于各个关系模式之间的数据依赖进行极小化处理,消除冗余的联系.</li>
<li>确定各关系模式分别属于第几范式.</li>
<li>分析对于应用环境这些模式是否合适,确定是否要对它们进行合并或分解.</li>
<li>对关系模式进行必要的分解或合并</li>
</ul>
<h3 id="4-设计用户子模式"><a href="#4-设计用户子模式" class="headerlink" title="4.设计用户子模式"></a>4.设计用户子模式</h3><ul>
<li>使用更符合用户习惯的别名</li>
<li>针对不同级别的用户定义不同的外模式,以满足系统对安全性的要求.</li>
<li>简化用户对系统的使用</li>
</ul>
<h3 id="5-任务"><a href="#5-任务" class="headerlink" title="5.任务"></a>5.任务</h3><ul>
<li>将概念结构转化为具体的数据模型</li>
<li>逻辑结构设计的步骤</li>
<li>将概念结构转化为一般的关系、网状、层次模型</li>
<li>将转化来的关系、网状、层次模型向特定DBMS支持下的数据模型转换</li>
<li>对数据模型进行优化</li>
<li>设计用户子模式</li>
</ul>
<h3 id="6-逻辑结构设计时3个步骤"><a href="#6-逻辑结构设计时3个步骤" class="headerlink" title="6.逻辑结构设计时3个步骤"></a>6.逻辑结构设计时3个步骤</h3><p><img src="https://pic002.cnblogs.com/images/2012/387401/2012071310110493.png" alt="逻辑结构设计时3个步骤"></p>
<h2 id="2-5-数据库物理设计"><a href="#2-5-数据库物理设计" class="headerlink" title="2.5 数据库物理设计"></a>2.5 数据库物理设计</h2><h3 id="1-步骤"><a href="#1-步骤" class="headerlink" title="1.步骤"></a>1.步骤</h3><ul>
<li>确定数据库的物理结构,在关系数据库中主要指存取方法和存储结构</li>
<li>对物理结构进行评价,评价的重点是时间和空间效率</li>
</ul>
<h3 id="2-索引存取"><a href="#2-索引存取" class="headerlink" title="2.索引存取"></a>2.索引存取</h3><ul>
<li><p>选择索引存取方法的一般规则:</p>
<ul>
<li>如果一个(一组)属性经常在查询条件中出现,则考虑在这个(这组)属性上建立索引(组合索引)</li>
<li>如果一个属性经常作为最大值和最小值等聚集函数的参数,则考虑在这个属性上建立索引</li>
<li>如果一个(或一组)属性经常在连接操作的连接条件中出现,则考虑在这个(或这组)属性上建立索引</li>
</ul>
</li>
<li><p>关系上定义的索引数过多会带来较多的额外开销:</p>
<ul>
<li>维护索引的开销</li>
<li>查找索引的开销</li>
</ul>
</li>
</ul>
<h3 id="3-聚簇"><a href="#3-聚簇" class="headerlink" title="3.聚簇"></a>3.聚簇</h3><p>用途:</p>
<ul>
<li>大大提高按聚簇码进行查询的效率</li>
<li>节省存储空间</li>
</ul>
<p>局限性:</p>
<ul>
<li>聚簇只能提高某些特定应用的性能</li>
<li>建立与维护聚簇的开销相当大</li>
</ul>
<p>适用范围:</p>
<ul>
<li>既适用于单个关系独立聚簇,也适用于多个关系组合聚簇</li>
<li>当通过聚簇码进行访问或连接是该关系的主要应用,与聚簇码无关的其他访问很少或者是次要的时,可以使用聚簇</li>
</ul>
<h2 id="2-6-数据库实施"><a href="#2-6-数据库实施" class="headerlink" title="2.6 数据库实施"></a>2.6 数据库实施</h2><h2 id="2-7-数据库运行和维护"><a href="#2-7-数据库运行和维护" class="headerlink" title="2.7 数据库运行和维护"></a>2.7 数据库运行和维护</h2><h1 id="Part3-数据查询、数据更新、触发器"><a href="#Part3-数据查询、数据更新、触发器" class="headerlink" title="Part3 数据查询、数据更新、触发器"></a>Part3 数据查询、数据更新、触发器</h1><h2 id="3-1-数据查询"><a href="#3-1-数据查询" class="headerlink" title="3.1 数据查询"></a>3.1 数据查询</h2><h3 id="0-select"><a href="#0-select" class="headerlink" title="0.select"></a>0.select</h3><p>1.SELECT column_name,column_name<br>FROM table_name; 选取特定列</p>
<p>2.SELECT * FROM table_name; 选取所有列</p>
<p>3.distinct关键词：返回唯一不同值（筛掉重复值，只列出不同的值）</p>
<p>SELECT DISTINCT column_name,column_name<br>FROM table_name;</p>
<h3 id="1-聚集函数"><a href="#1-聚集函数" class="headerlink" title="1.聚集函数"></a>1.聚集函数</h3><p>COUNT(列个数或元组个数)    </p>
<p>SUM(列值总和)    </p>
<p>AVG(列平均值)　　　　　　　+  ([DISTINCT|ALL] &lt;列名&gt;)</p>
<p>MAX(列中最大值)    </p>
<p>MIN(列中最小值)</p>
<p>VARIANCE(列的标准方差)</p>
<p>STDDEV(列的标准差)</p>
<h3 id="2-where语句"><a href="#2-where语句" class="headerlink" title="2.where语句"></a>2.where语句</h3><p>where </p>
<p>where &lt;属性列名&gt; [not] between A and B </p>
<p>where &lt;属性列名&gt;[not] in … (SELECT语句)/(&lt;值1&gt;)[,&lt;值2&gt;]……..)</p>
<p>where &lt;属性列名&gt; [NOT]LIKE &lt;匹配串&gt;</p>
<p>where &lt;属性列名&gt; IS [NOT] NULL</p>
<p>[NOT] EXISTS (SELECT语句)</p>
<p>&lt;条件表达式&gt; AND / OR &lt;条件表达式&gt; [ AND / OR &lt;条件表达式&gt;]……..</p>
<h3 id="3-ORDER-BY-子句"><a href="#3-ORDER-BY-子句" class="headerlink" title="3.ORDER BY 子句:"></a>3.ORDER BY 子句:</h3><p>ORDER BY 关键字用于对结果集按照一个列或者多个列进行排序。ORDER BY 关键字默认按照升序对记录进行排序。如果需要按照降序对记录进行排序，您可以使用 DESC 关键字。</p>
<p>说明:</p>
<ul>
<li>升序：ASC;(缺省值)</li>
<li>降序：DESC;</li>
<li><p>当排序列含空值时:</p>
<ul>
<li>ASC：排序列为空值的元组最后显示</li>
<li>DESC：排序列为空值的元组最先显示</li>
</ul>
</li>
</ul>
<h3 id="4-GROUP-BY-子句"><a href="#4-GROUP-BY-子句" class="headerlink" title="4.GROUP BY 子句"></a>4.GROUP BY 子句</h3><p>细化聚集函数的作用对象</p>
<h3 id="5-not-exists"><a href="#5-not-exists" class="headerlink" title="5.(not) exists"></a>5.(not) exists</h3><p>带有 EXISTS 谓词的子查询不返回任何数据,只产生逻辑真值 “true” 或逻辑假值 “false”</p>
<p>eg.查询没有选修1号课程的学生姓名.</p>
<p>SELECT Sname<br>FROM Student<br>WHERE NOT EXISTS(SELECT *<br>FROM SC<br>WHERE Sno = Student.Sno AND Cno=’1’);</p>
<h3 id="6-连接查询"><a href="#6-连接查询" class="headerlink" title="6.连接查询"></a>6.连接查询</h3><p>同时涉及多表的查询。</p>
<p>格式:</p>
<ul>
<li>[&lt;表名1&gt;.]&lt;列名1&gt; &lt;比较运算符&gt; [&lt;表名2&gt;.]&lt;列名2&gt;</li>
<li>[&lt;表名1&gt;.]&lt;列名1&gt; BETWEEN [&lt;表名2&gt;.]&lt;列名2&gt; AND [&lt;表名2&gt;.]&lt;列名3&gt;</li>
</ul>
<h4 id="等值连接："><a href="#等值连接：" class="headerlink" title="等值连接： ="></a>等值连接： =</h4><p>eg.查询每个学生及其选修课程情况：</p>
<p>select student.<em>, SC.</em><br>from student, SC<br>where student.sno = SC.sno</p>
<h4 id="自然连接"><a href="#自然连接" class="headerlink" title="自然连接"></a>自然连接</h4><p>说明:在等值连接中把目标列中重复的属性列去掉</p>
<h4 id="自身连接"><a href="#自身连接" class="headerlink" title="自身连接"></a>自身连接</h4><p>说明:一个表与其自己进行连接</p>
<p>要求:需要给表起别名以示区别,由于所有属性名都是同名属性,因此必须使用别名前缀</p>
<p>例子:查询每一门课的间接先修课（即先修课的先修课）</p>
<p>SELECT FIRST.Cno,SECOND.Cpno<br>FROM Course FIRST,Course SECOND<br>WHERE FIRST.Cpno = SECOND.Cno;</p>
<h4 id="复合条件连接"><a href="#复合条件连接" class="headerlink" title="复合条件连接"></a>复合条件连接</h4><p>说明:WHERE子 句中含多个连接条件</p>
<p>例子:查询选修2号课程且成绩在90分以上的所有学生的学号和姓名</p>
<p>SELECT Student.Sno, Sname<br>FROM Student, SC<br>WHERE Student.Sno = SC.Sno/<em> 连接谓词</em>/<br>AND SC.Cno=’2’AND SC.Grade &gt; 90;/<em> 其他限定条件 </em>/</p>
<h4 id="嵌套查询"><a href="#嵌套查询" class="headerlink" title="嵌套查询"></a>嵌套查询</h4><p>概述:</p>
<ul>
<li>一个 SELECT-FROM-WHERE 语句称为一个查询块,将一个查询块嵌套在另一个查询块的 WHERE 子句或 HAVING 短语的条件中的查询称为嵌套查询</li>
<li>上层查询快称为外层查询或父查询,下层查询块称为内层查询或子查询</li>
</ul>
<p>1.不相关子查询</p>
<p>要求: 子查询的查询条件不依赖于父查询</p>
<p>实现: 由里向外逐层处理.即每个子查询在上一级查询处理之前求解,子查询的结果用于建立其父查询的查找条件</p>
<p>eg.查询选修了2号课程的所有学生姓名</p>
<p>select sname<br>from student<br>where sno in (select sno<br>from SC<br>where cno = ‘2’);</p>
<p>2.相关子查询:</p>
<p>要求:子查询的查询条件依赖于父查询</p>
<p>实现: 首先取外层查询中表的第一个元组,根据它与内层查询相关的属性值处理内层查询,若WHERE子句返回值为真,则取此元组放入结果表,然后再取外层表的下一个元组,重复这一过程,直至外层表全部检查完为止</p>
<p>例子:找出每个学生超过他选修课程平均成绩的课程号</p>
<p>SELECT Sno, Cno<br>FROM SC x<br>WHERE Grade &gt;=(SELECT AVG(Grade)<br>FROM SC y<br>WHERE y.Sno=x.Sno);</p>
<h2 id="3-2-数据更新"><a href="#3-2-数据更新" class="headerlink" title="3.2 数据更新"></a>3.2 数据更新</h2><h3 id="数据插入"><a href="#数据插入" class="headerlink" title="数据插入"></a>数据插入</h3><p>1.插入元组</p>
<p>insert into  &lt;表名&gt; [(&lt;属性列1&gt;[,&lt;属性列2 &gt;]…)]<br>VALUES (&lt;常量1&gt; [,&lt;常量2&gt;] … )</p>
<p>eg.将一个新学生元组（学号：200215128;姓名：陈冬;性别：男;所在系：IS;年龄：18岁）插入到Student表中</p>
<p>insert into student (‘xxxx’,’xxxx’,’xxx’,18)</p>
<p>2.插入子查询结果:</p>
<p>INSERT INTO &lt;表名&gt; [(&lt;属性列1&gt;[,&lt;属性列2 &gt;]…)]<br>子查询</p>
<p>eg.</p>
<p>insert into Dept_age(Sdept, Avg_age)<br>select Sdept, AVG(Sage)<br>from Student<br>group by Sdept;</p>
<h3 id="数据更改"><a href="#数据更改" class="headerlink" title="数据更改"></a>数据更改</h3><p>UPDATE &lt;表名&gt; SET &lt;列名&gt;=&lt;表达式&gt;[,&lt;列名&gt;=&lt;表达式&gt;]… [WHERE &lt;条件&gt;];</p>
<p>eg.将学生 200215121 的年龄改为22岁(修改某一个元组的值)</p>
<p>UPDATE Student<br>SET Sage=22<br>WHERE Sno=’ 200215121 ‘;</p>
<p>将所有学生的年龄增加1岁(修改多个元组的值)</p>
<p>UPDATE Student<br>SET Sage= Sage+1;</p>
<p>将计算机科学系全体学生的成绩置零(修改多个元组的值)</p>
<p>UPDATE SC<br>SET Grade=0<br>WHERE ‘CS’= (SELETE Sdept<br>FROM Student<br>WHERE Student.Sno = SC.Sno);</p>
<h3 id="数据删除"><a href="#数据删除" class="headerlink" title="数据删除"></a>数据删除</h3><p>DELETE<br>FROM &lt;表名&gt;<br>[WHERE &lt;条件&gt;];</p>
<p>eg.删除学号为 200215128 的学生记录(删除某一个元组的值)</p>
<p>DELETE<br>FROM Student<br>WHERE Sno=’200215128’;</p>
<p>删除所有的学生选课记录(删除多个元组的值)</p>
<p>DELETE<br>FROM SC;</p>
<p>删除计算机科学系所有学生的选课记录(带子查询的删除语句)</p>
<p>DELETE<br>FROM SC<br>WHERE ‘CS’= (SELECT Sdept<br>FROM Student<br>WHERE Student.Sno=SC.Sno);</p>
<h2 id="3-3基本表，表完整性"><a href="#3-3基本表，表完整性" class="headerlink" title="3.3基本表，表完整性"></a>3.3基本表，表完整性</h2><h3 id="基本表"><a href="#基本表" class="headerlink" title="基本表"></a>基本表</h3><p>1.定义基本表</p>
<p>create table &lt;表名&gt;<br>（&lt;列名&gt; &lt;数据类型&gt;[ &lt;列级完整性约束条件&gt; ]<br>[,&lt;列名&gt; &lt;数据类型&gt;[ &lt;列级完整性约束条件&gt;] ] …<br>[,&lt;表级完整性约束条件&gt; ] ）;</p>
<p>约束类型：</p>
<p>Primary key　　定义主键,保证主键列无重复值　　　　　　实体完整性<br>Unique　　　　  保证该列无重复值　　　　　　　　　 　　实体完整性<br>Foreign key　　 定义外键,保证数据表间数据的一致性　　　参照完整性<br>Check    　　　　  定义表中某些列的数据范围　　　　　　　 自定义完整性<br>Default　　　　  为列的数据提供默认值　　　　　　　　　 自定义完整性</p>
<p>数据基本类型:</p>
<p>数据类型　　　　　 含义　　　　　　　　　　　　　　　　　　　　　　　　　　　　　<br>CHAR(n)　　　　　 长度为n的定长字符串<br>VARCHAR(n)　　　 最大长度为n的变长字符串,实际存储有效长度<br>INT　　　　　　　　长整数（也可以写作 INTEGER）<br>SMALLINT　　　　   短整数<br>NUMERIC(p,d)　  定点数,由p位数字（不包括符号、小数点）组成,小数后面有d位数字<br>REAL    　　　　　　   取决于机器精度的浮点数<br>Double Precision　 取决于机器精度的双精度浮点数<br>FLOAT(n)　　　　   浮点数,精度至少为n位数字<br>DATE    　　　　　　 日期,包含年、月、日,格式为 YYYY-MM-DD<br>TIME    　　　　　　  时间,包含一日的时、分、秒,格式为 HH:MM:SS</p>
<p>eg.建立一个学生选课表</p>
<p>CREATE TABLE SC<br>(Sno CHAR(9),<br>Cno CHAR(4),<br>Grade SMALLINT,<br>PRIMARY KEY (Sno,Cno),<br>/<em> 主码由两个属性构成,必须作为表级完整性进行定义</em>/<br>FOREIGN KEY (Sno) REFERENCES Student(Sno),<br>/<em> 表级完整性约束条件,Sno是外码,被参照表是Student </em>/<br>FOREIGN KEY (Cno) REFERENCES Course(Cno)<br>/<em> 表级完整性约束条件, Cno是外码,被参照表是Course</em>/<br>);</p>
<p>2.修改基本表</p>
<p>ALTER TABLE &lt;表名&gt;<br>[ ADD &lt;新列名&gt; &lt;数据类型&gt; [ 完整性约束 ] ]<br>[ DROP &lt;完整性约束名&gt; ]<br>[ ALTER COLUMN&lt;列名&gt; &lt;数据类型&gt; ]<br>[ADD [COLUMN&lt;约束名&gt; ] &lt;约束定义&gt; ]<br>;</p>
<p>eg.向Student表增加“入学时间”列,其数据类型为日期型  .</p>
<p>ALTER TABLE Student<br>ADD S_entrance DATE</p>
<p>3.删除基本表</p>
<p>DROP TABLE &lt;表名&gt;［RESTRICT| CASCADE］;(缺省情况是 RESTRICT)</p>
<p>eg.删除Student表</p>
<p>DROP TABLE Student CASCADE ;</p>
<h3 id="实体完整性"><a href="#实体完整性" class="headerlink" title="实体完整性"></a>实体完整性</h3><p>定义为列级约束条件:</p>
<p>CREATE TABLE Student(<br>Sno CHAR(9) PRIMARY KEY,<br>Sname CHAR(20) NOT NULL,<br>Ssex CHAR(2) ,<br>Sage SMALLINT,<br>Sdept CHAR(20));</p>
<p>定义为表级约束条件:</p>
<p>CREATE TABLE Student(<br>Sno CHAR(9),<br>Sname CHAR(20) NOT NULL,<br>Ssex CHAR(2) ,<br>Sage SMALLINT,<br>Sdept CHAR(20),<br>PRIMARY KEY (Sno));</p>
<h3 id="参照完整性"><a href="#参照完整性" class="headerlink" title="参照完整性"></a>参照完整性</h3><p>在 CREATE TABLE 中用 FOREIGN KEY 短语定义哪些列为外码用REFERENCES短语指明这些外码参照哪些表的主码</p>
<p>CREATE TABLE SC<br>(Sno CHAR(9) NOT NULL,<br>Cno CHAR(4) NOT NULL,<br>Grade SMALLINT,<br>PRIMARY KEY (Sno, Cno), /<em>在表级定义实体完整性</em>/<br>FOREIGN KEY (Sno) REFERENCES Student(Sno),<br>/<em>在表级定义参照完整性</em>/<br>FOREIGN KEY (Cno) REFERENCES Course(Cno)<br>/<em>在表级定义参照完整性</em>/<br>);</p>
<h2 id="3-4-视图"><a href="#3-4-视图" class="headerlink" title="3.4 视图"></a>3.4 视图</h2><p>特点:</p>
<ul>
<li>是从一个或几个基本表（或视图）导出的表</li>
<li>只存放视图的定义,不存放视图对应的数据</li>
<li>基表中的数据发生变化,从视图中查询出的数据也随之改变</li>
<li>一个窗口,透过它可以看到数据库中自己感兴趣的数据及其变化</li>
</ul>
<p>特殊用途: 定义基本表是,为了减少数据库中的沉余数据,表中只存放基本数据,由基本数据经过各种计算派生出的数据一般是不存储的,但由于视图中数据并不是实际存储,所以定义视图时可以根据应用的需要,设置一些派生属性列.这些派生属性由于在基本表中并不实际存在也称它们为虚拟列.带虚拟列的视图也称为带表达式的视图</p>
<p>作用:</p>
<ul>
<li>视图能够简化用户的操作</li>
<li>视图使用户能以多种角度看待同一数据</li>
<li>视图对重构数据库提供了一定程度的逻辑独立性</li>
<li>视图能够对机密数据提供安全保护</li>
<li>适当的利用视图可以更清晰的表达查询</li>
</ul>
<p>基于视图的操作:</p>
<ul>
<li>查询</li>
<li>删除</li>
<li>受限更新</li>
<li>定义基于该视图的新视图</li>
</ul>
<h3 id="建立视图"><a href="#建立视图" class="headerlink" title="建立视图"></a>建立视图</h3><p>create view<br>&lt;视图名&gt; [(&lt;列名&gt; [,&lt;列名&gt;]…)]<br>AS &lt;子查询&gt;<br>[WITH CHECK OPTION];</p>
<p>eg.建立信息系学生的视图,并要求进行修改和插入操作时仍需保证该视图只有信息系的学生</p>
<p>CREATE VIEW IS_Student<br>AS<br>SELECT Sno,Sname,Sage<br>FROM Student<br>WHERE Sdept= ‘IS’<br>WITH CHECK OPTION;</p>
<p>基于视图的视图  (建立信息系选修了1号课程且成绩在90分以上的学生的视图)</p>
<p>CREATE VIEW IS_S2<br>AS<br>SELECT Sno,Sname,Grade<br>FROM IS_S1<br>WHERE Grade&gt;=90;</p>
<h3 id="删除视图"><a href="#删除视图" class="headerlink" title="删除视图"></a>删除视图</h3><p>DROP VIEW &lt;视图名&gt;[CASCADE];</p>
<p>该语句从数据字典中删除指定的视图定义,如果该视图上还导出了其他视图,使用CASCADE级联删除语句,把该视图和由它导出的所有视图一起删除</p>
<p>删除基表时,由该基表导出的所有视图定义都必须显式地使用DROP VIEW语句删除<br>视图查询:</p>
<h3 id="视图查询"><a href="#视图查询" class="headerlink" title="视图查询"></a>视图查询</h3><h3 id="更新视图"><a href="#更新视图" class="headerlink" title="更新视图"></a>更新视图</h3><p>限制:</p>
<ul>
<li>一些视图是不可更新的,因为对这些视图的更新不能唯一地有意义地转换成对相应基本表的更新</li>
<li>允许对行列子集视图进行更新</li>
<li><p>对其他类型视图的更新不同系统有不同限制</p>
<ul>
<li>若视图是由两个以上基本表导出的,则此视图不允许更新</li>
<li>若视图的字段来自字段表达式或常数,则不允许对此视图执行INSERT和UPDATE操作,但是允许执行DELETE操作,</li>
<li>若视图的字段来自聚集函数,则此视图不允许更新</li>
<li>若视图定义中含有GROUP BY子句,则此视图不允许更新</li>
<li>若视图定义中含有DISTINCT,则此视图不允许更新</li>
</ul>
</li>
</ul>
<h1 id="Part4-数据库安全性"><a href="#Part4-数据库安全性" class="headerlink" title="Part4 数据库安全性"></a>Part4 数据库安全性</h1><h2 id="1-概述"><a href="#1-概述" class="headerlink" title="1.概述"></a>1.概述</h2><p>数据库的安全性是指保护数据库以防止不合法的使用所造成的数据泄漏、更改或破坏。</p>
<p>数据库的不安全因素</p>
<ul>
<li>非授权用户对数据库的恶意存取和破坏</li>
<li>数据库中重要或敏感的数据被泄露</li>
<li>安全环境的脆弱性</li>
</ul>
<h2 id="2-数据库安全性措施"><a href="#2-数据库安全性措施" class="headerlink" title="2.数据库安全性措施"></a>2.数据库安全性措施</h2><p><img src="http://ofolh8dcq.bkt.clouddn.com/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%89%E5%85%A8%E6%80%A72.PNG" alt="安全模型"></p>
<p><img src="http://ofolh8dcq.bkt.clouddn.com/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%89%E5%85%A8%E6%80%A73.PNG" alt="数据库管理系统安全性控制模型"></p>
<p>数据库安全性控制的常用方法</p>
<ul>
<li>用户标识和鉴定</li>
<li>存取控制</li>
<li>视图</li>
<li>审计</li>
<li>密码存储</li>
</ul>
<h2 id="3-用户身份鉴别"><a href="#3-用户身份鉴别" class="headerlink" title="3.用户身份鉴别"></a>3.用户身份鉴别</h2><p>用户标识：用户名，用户标识号</p>
<p>鉴别方法：</p>
<ul>
<li>静态口令鉴别</li>
<li>动态口令</li>
<li>生物特征</li>
<li>智能卡</li>
</ul>
<h2 id="4-存取控制"><a href="#4-存取控制" class="headerlink" title="4.存取控制"></a>4.存取控制</h2><p>存取控制机制的组成：</p>
<ul>
<li>定义用户权限</li>
<li>合法权限检查</li>
</ul>
<p>常用存取控制方法：</p>
<ul>
<li>自主存取控制：通过SQL的GRANT 和 REVOKE语句实现</li>
<li>强制存取控制</li>
</ul>
<h3 id="自主存取控制"><a href="#自主存取控制" class="headerlink" title="自主存取控制"></a>自主存取控制</h3><ol>
<li>GRANT</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">GRANT &lt;权限&gt;[,&lt;权限&gt;]... </span><br><span class="line">ON &lt;对象类型&gt; &lt;对象名&gt;,&lt;对象类型&gt; &lt;对象名&gt;,...</span><br><span class="line">TO &lt;用户&gt;[,&lt;用户&gt;]...</span><br><span class="line">[WITH GRANT OPTION];</span><br><span class="line"></span><br><span class="line">GRANT SELECT   /*把查询Student表的权限授给用户U1*/</span><br><span class="line">ON TABLE Student</span><br><span class="line">TO U1;</span><br><span class="line">GRANT ALL PRIVILEGES   /*把对Student表和Course表的全部操作权限授予所有用户*/</span><br><span class="line">ON TABLE Student,Course</span><br><span class="line">TO PUBLIC;</span><br><span class="line">GRANT UPDATE(Sno),SELECT  /*把查询Student表和修改学生学号的权限授给用户U4*/</span><br><span class="line">ON TABLE Student</span><br><span class="line">TO U4;</span><br></pre></td></tr></table></figure>
<p>2.REVOKE</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">REVOKE &lt;权限&gt;[,&lt;权限&gt;]... </span><br><span class="line">ON &lt;对象类型&gt; &lt;对象名&gt;,&lt;对象类型&gt; &lt;对象名&gt;,...</span><br><span class="line">FROM &lt;用户&gt;[,&lt;用户&gt;]...;</span><br></pre></td></tr></table></figure>
<h3 id="强制存取控制"><a href="#强制存取控制" class="headerlink" title="强制存取控制"></a>强制存取控制</h3><p>自主：可能存在数据的无意泄露</p>
<p>强制：全部实体分为主体和客体两大类。</p>
<p>DAC+MAC安全性检查：</p>
<p><img src="http://ofolh8dcq.bkt.clouddn.com/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AE%89%E5%85%A8%E6%80%A74.PNG" alt="DAC+MAC安全性检查"></p>
<p>先进行自主存取控制检查，通过自主存取控制检查的数据对象再由系统进行强制存取控制检查，只有通过强制存取控制检查的数据对象方可存取。</p>
<h2 id="5-视图机制"><a href="#5-视图机制" class="headerlink" title="5.视图机制"></a>5.视图机制</h2><p>把要保密的数据对无权存取这些数据的用户隐藏起来，对数据提供一定程度的安全保护</p>
<p>间接实现了支持存取谓词的用户权限定义</p>
<h2 id="6-审计"><a href="#6-审计" class="headerlink" title="6.审计"></a>6.审计</h2><p>什么是审计</p>
<ul>
<li>审计日志（Audit Log）</li>
<li>将用户对数据库的所有操作记录在上面</li>
<li>DBA利用审计日志，找出非法存取数据的人、时间和内容</li>
<li>C2以上安全级别的DBMS必须具有审计功能</li>
</ul>
<p>AUDIT语句和NOAUDIT语句</p>
<ul>
<li>AUDIT语句：设置审计功能</li>
<li>NOAUDIT语句：取消审计功能</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">AUDIT ALTER,UPDATE  /*对修改SC表结构或修改SC表数据的操作进行审计*/</span><br><span class="line">ON SC;</span><br><span class="line">NOAUDIT ALTER,UPDATE</span><br><span class="line">ON SC;</span><br></pre></td></tr></table></figure>
<p>审计一般可以分为用户级审计和系统级审计</p>
<ul>
<li><p>用户级审计</p>
<ul>
<li>任何用户可设置的审计</li>
<li>主要是用户针对自己创建的数据库表和视图进行审计</li>
</ul>
</li>
<li><p>系统级审计</p>
<ul>
<li>只能由数据库管理员设置</li>
<li>监测成功或失败的登录要求、监测授权和收回操作以及其他数据库级权限下的操作</li>
</ul>
</li>
</ul>
<h2 id="7-数据加密"><a href="#7-数据加密" class="headerlink" title="7.数据加密"></a>7.数据加密</h2><p>防止数据库中数据在存储和传输中失密的有效手段</p>
<p>根据一定的算法将原始数据—明文（Plain text）变换为不可直接识别的格式­—密文（Cipher text）</p>
<p>加密方法：</p>
<ul>
<li>存储加密</li>
<li>传输加密</li>
</ul>
<h2 id="8-其他安全性保护"><a href="#8-其他安全性保护" class="headerlink" title="8.其他安全性保护"></a>8.其他安全性保护</h2><p>推理控制</p>
<p>隐蔽信道</p>
<p>数据隐私保护</p>
<h1 id="Part5-数据库恢复技术"><a href="#Part5-数据库恢复技术" class="headerlink" title="Part5 数据库恢复技术"></a>Part5 数据库恢复技术</h1><h2 id="5-1-事务的基本概念"><a href="#5-1-事务的基本概念" class="headerlink" title="5.1 事务的基本概念"></a>5.1 事务的基本概念</h2><p>事务是一系列的数据库操作，是数据库应用程序的基本逻辑单元。事务处理技术主要包括数据库恢复技术和并发控制技术。</p>
<p>事务是用户定义的一个数据库操作序列，这些操作要么全做，要么全不做，是一个不可分割的工作单位。</p>
<p>事务和程序比较</p>
<ul>
<li>两个概念</li>
<li>在关系数据库中，一个事务可以是一条SQL语句、一组SQL语句或整个程序。</li>
<li>一个程序通常包含多个事务</li>
</ul>
<p>显式定义：</p>
<ul>
<li>commit提交：提交事务的所有操作，将事务中所有对数据库的更新写回到磁盘上的物理数据库中去</li>
<li>ROLLBACK表示回滚，系统将事务中对数据库的所有已完成的操作全部撤销，回滚到事务开始时的状态</li>
</ul>
<p>事务的ACID特性：</p>
<ul>
<li>原子性（Atomicity）<br>事务是数据库的逻辑工作单位，事务中包括的诸操作要么都做，要么都不做。</li>
<li>一致性（Consistency）<br>事务执行的结果必须是使数据库从一个一致性状态变到另一个一致性状态。</li>
<li>隔离性（Isolation）<br>一个事务的执行不能被其他事务干扰。</li>
<li>持续性（Durability ）<br>一个事务一旦提交，它对数据库中数据的改变就应该是永久性的。</li>
</ul>
<h2 id="5-2-数据库恢复概述"><a href="#5-2-数据库恢复概述" class="headerlink" title="5.2 数据库恢复概述"></a>5.2 数据库恢复概述</h2><h3 id="1-故障"><a href="#1-故障" class="headerlink" title="1.故障"></a>1.故障</h3><p>故障：</p>
<ul>
<li>系统故障：软硬件故障</li>
<li>人为故障：操作失误，恶意破坏</li>
</ul>
<p>故障种类：</p>
<ul>
<li>事务内部故障：解决——撤销事务</li>
<li><p>系统故障：不破坏数据库；内存缓冲区的信息全部丢失；解决：</p>
<ul>
<li>事务未提交：UNDO所有未完成事务（强行撤销）</li>
<li>事务已提交：REDO所有已提交事务（重做）</li>
</ul>
</li>
<li><p>介质故障：外存故障；解决——装入故障前某时刻的数据副本/重做所有成功事务</p>
</li>
<li>病毒</li>
</ul>
<h3 id="2-恢复的实现技术"><a href="#2-恢复的实现技术" class="headerlink" title="2.恢复的实现技术"></a>2.恢复的实现技术</h3><p>恢复操作的基本原理：冗余</p>
<ul>
<li>利用存储在系统其它地方的冗余数据来重建数据库中已被破坏或不正确的那部分数据</li>
</ul>
<p>建立冗余数据最常用的技术是<strong>数据转储和登记日志文件</strong>。</p>
<h3 id="数据转储"><a href="#数据转储" class="headerlink" title="数据转储"></a>数据转储</h3><p>转储是指DBA将整个数据库复制到磁带或另一个磁盘上保存起来的过程，备用的数据称为后备副本或后援副本。</p>
<p>静态转储：在系统中无运行事务时进行的转储操作</p>
<p>动态转储：转储操作与用户事务并发进行</p>
<h3 id="登记日志文件"><a href="#登记日志文件" class="headerlink" title="登记日志文件"></a>登记日志文件</h3><p>日志文件格式：</p>
<ul>
<li>以记录为单位的日志</li>
<li>以数据块为单位的日志</li>
</ul>
<h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><p><a href="http://www.cnblogs.com/kzang/tag/SQL/" target="_blank" rel="noopener">kzangv-SQL笔记</a><br><a href="http://www.cnblogs.com/maybe2030/p/4603766.html#_label2" target="_blank" rel="noopener">SQL学习笔记之基础操作</a><br><a href="http://lewiszlw.me/categories/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%A6%82%E8%AE%BA/" target="_blank" rel="noopener">Lewis’s blog-数据库系统概论</a></p>

      
    </div>
    
    
    

    

    
      <div>
        <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
  <div>Thanks!</div>
  <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
    <span>Donate</span>
  </button>
  <div id="QR" style="display: none;">

    
      <div id="wechat" style="display: inline-block">
        <img id="wechat_qr" src="/images/wechat.png" alt="Scarlett Huang WeChat Pay"/>
        <p>WeChat Pay</p>
      </div>
    

    

    

  </div>
</div>

      </div>
    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Database-System/" rel="tag"><i class="fa fa-tag"></i> Database System</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/01/05/计算机组成原理复习笔记2/" rel="next" title="计算机组成原理复习笔记2">
                <i class="fa fa-chevron-left"></i> 计算机组成原理复习笔记2
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/01/07/最强大脑节目社会评议数据分析/" rel="prev" title="最强大脑节目社会评议数据分析">
                最强大脑节目社会评议数据分析 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
      <div id="disqus_thread">
        <noscript>
          Please enable JavaScript to view the
          <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a>
        </noscript>
      </div>
    
  </div>


        </div>
        
          
  


  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            Overview
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.png"
               alt="Scarlett Huang" />
          <p class="site-author-name" itemprop="name">Scarlett Huang</p>
           
              <p class="site-description motion-element" itemprop="description"></p>
           
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives/">
                <span class="site-state-item-count">192</span>
                <span class="site-state-item-name">posts</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">35</span>
                <span class="site-state-item-name">categories</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">62</span>
                <span class="site-state-item-name">tags</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://www.scarletthuang.cn" target="_blank" title="Biography">
                  
                    <i class="fa fa-fw fa-user"></i>
                  
                    
                      Biography
                    
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://github.com/ScarlettYellow" target="_blank" title="Github">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                    
                      Github
                    
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://www.woshipm.com/u/192348" target="_blank" title="WoShiPM">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                    
                      WoShiPM
                    
                </a>
              </span>
            
          
        </div>

        
        

        
        
          <div class="links-of-blogroll motion-element links-of-blogroll-inline">
            <div class="links-of-blogroll-title">
              <i class="fa  fa-fw fa-globe"></i>
              Friend Links
            </div>
            <ul class="links-of-blogroll-list">
              
                <li class="links-of-blogroll-item">
                  <a href="https://unique-ailab.github.io/" title="Unique-AILab" target="_blank">Unique-AILab</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="hubertwang.me/" title="MR WHY (ML Dev. & AI PM)" target="_blank">MR WHY (ML Dev. & AI PM)</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="https://zekangli.com/" title="Zekang Li (NLP Researcher)" target="_blank">Zekang Li (NLP Researcher)</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://wondervictor.github.io/" title="Vic Chan (CV Dev.)" target="_blank">Vic Chan (CV Dev.)</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="http://blog.qzwlecr.com/" title="qzwlecr (Alg. Dev.)" target="_blank">qzwlecr (Alg. Dev.)</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="https://alisahhh.github.io/" title="Alisa (Alg. Dev.)" target="_blank">Alisa (Alg. Dev.)</a>
                </li>
              
                <li class="links-of-blogroll-item">
                  <a href="https://llag9810.github.io/" title="yifan (Android Dev.)" target="_blank">yifan (Android Dev.)</a>
                </li>
              
            </ul>
          </div>
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Part1-数据库概述"><span class="nav-number">1.</span> <span class="nav-text">Part1 数据库概述</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-1-数据库发展"><span class="nav-number">1.1.</span> <span class="nav-text">1.1 数据库发展</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-2-基本概念"><span class="nav-number">1.2.</span> <span class="nav-text">1.2 基本概念</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-数据模型"><span class="nav-number">1.2.1.</span> <span class="nav-text">1.数据模型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-四个基本概念"><span class="nav-number">1.2.2.</span> <span class="nav-text">2.四个基本概念</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-数据独立性（两个独立性）"><span class="nav-number">1.2.3.</span> <span class="nav-text">3.数据独立性（两个独立性）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-信息世界基本概念"><span class="nav-number">1.2.4.</span> <span class="nav-text">4.信息世界基本概念</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-数据库管理员的具体职责（DBA）"><span class="nav-number">1.2.5.</span> <span class="nav-text">5.数据库管理员的具体职责（DBA）</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-3-关系数据库理论"><span class="nav-number">1.3.</span> <span class="nav-text">1.3 关系数据库理论</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-关系模式（五元组）"><span class="nav-number">1.3.1.</span> <span class="nav-text">1. 关系模式（五元组）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-相关概念"><span class="nav-number">1.3.2.</span> <span class="nav-text">2. 相关概念</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-模式存在问题"><span class="nav-number">1.3.3.</span> <span class="nav-text">3. 模式存在问题</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-范式（规范化）"><span class="nav-number">1.3.4.</span> <span class="nav-text">4.范式（规范化）</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-4-关系模型"><span class="nav-number">1.4.</span> <span class="nav-text">1.4 关系模型</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-关系模型"><span class="nav-number">1.4.1.</span> <span class="nav-text">1.关系模型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-相关概念-1"><span class="nav-number">1.4.2.</span> <span class="nav-text">2.相关概念</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-完整性约束"><span class="nav-number">1.4.3.</span> <span class="nav-text">3.完整性约束</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-关系模型的优缺点"><span class="nav-number">1.4.4.</span> <span class="nav-text">4.关系模型的优缺点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-系统结构解释"><span class="nav-number">1.4.5.</span> <span class="nav-text">5.系统结构解释</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-实例instance"><span class="nav-number">1.4.6.</span> <span class="nav-text">6.实例instance</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-模式Schema（又称：逻辑模式）"><span class="nav-number">1.4.7.</span> <span class="nav-text">7.模式Schema（又称：逻辑模式）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-外模式-External-Schema"><span class="nav-number">1.4.8.</span> <span class="nav-text">8.外模式(External Schema)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#9-内模式（internal-schema，又称存储模式）"><span class="nav-number">1.4.9.</span> <span class="nav-text">9.内模式（internal schema，又称存储模式）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#10-三级模式结构（数据库系统的系统结构）"><span class="nav-number">1.4.10.</span> <span class="nav-text">10.三级模式结构（数据库系统的系统结构）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#11-二级映象"><span class="nav-number">1.4.11.</span> <span class="nav-text">11.二级映象</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#12-触发器"><span class="nav-number">1.4.12.</span> <span class="nav-text">12 触发器</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-5-SQL概述"><span class="nav-number">1.5.</span> <span class="nav-text">1.5 SQL概述</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-SQL的特点"><span class="nav-number">1.5.1.</span> <span class="nav-text">1.SQL的特点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-SQL的数据定义功能"><span class="nav-number">1.5.2.</span> <span class="nav-text">2.SQL的数据定义功能</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-三个基本概念"><span class="nav-number">1.5.3.</span> <span class="nav-text">3.三个基本概念</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-SQL支持关系数据库三级模式结构"><span class="nav-number">1.5.4.</span> <span class="nav-text">4.SQL支持关系数据库三级模式结构</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-标识符"><span class="nav-number">1.5.5.</span> <span class="nav-text">5.标识符</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Part2-数据库设计"><span class="nav-number">2.</span> <span class="nav-text">Part2 数据库设计</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#2-1-总体设计过程"><span class="nav-number">2.1.</span> <span class="nav-text">2.1 总体设计过程</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-数据库设计步骤"><span class="nav-number">2.1.1.</span> <span class="nav-text">1.数据库设计步骤</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-设计描述"><span class="nav-number">2.1.2.</span> <span class="nav-text">2.设计描述</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-数据库设计的特点"><span class="nav-number">2.1.3.</span> <span class="nav-text">3.数据库设计的特点</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-2-需求分析"><span class="nav-number">2.2.</span> <span class="nav-text">2.2 需求分析</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-分析和表达用户需求"><span class="nav-number">2.2.1.</span> <span class="nav-text">1.分析和表达用户需求</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-任务"><span class="nav-number">2.2.2.</span> <span class="nav-text">2.任务</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-需求分析过程"><span class="nav-number">2.2.3.</span> <span class="nav-text">3.需求分析过程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-数据流图"><span class="nav-number">2.2.4.</span> <span class="nav-text">4.数据流图</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-3-概念结构设计"><span class="nav-number">2.3.</span> <span class="nav-text">2.3 概念结构设计</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-四类方法"><span class="nav-number">2.3.1.</span> <span class="nav-text">1.四类方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-三种抽象"><span class="nav-number">2.3.2.</span> <span class="nav-text">3.三种抽象</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-4-逻辑结构设计"><span class="nav-number">2.4.</span> <span class="nav-text">2.4 逻辑结构设计</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-E-R图与关系模型转换"><span class="nav-number">2.4.1.</span> <span class="nav-text">1.E-R图与关系模型转换</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-E-R图实体型间的联系有以下不同情况"><span class="nav-number">2.4.2.</span> <span class="nav-text">2.E-R图实体型间的联系有以下不同情况</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-优化数据模型方法"><span class="nav-number">2.4.3.</span> <span class="nav-text">3.优化数据模型方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-设计用户子模式"><span class="nav-number">2.4.4.</span> <span class="nav-text">4.设计用户子模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-任务"><span class="nav-number">2.4.5.</span> <span class="nav-text">5.任务</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-逻辑结构设计时3个步骤"><span class="nav-number">2.4.6.</span> <span class="nav-text">6.逻辑结构设计时3个步骤</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-5-数据库物理设计"><span class="nav-number">2.5.</span> <span class="nav-text">2.5 数据库物理设计</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-步骤"><span class="nav-number">2.5.1.</span> <span class="nav-text">1.步骤</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-索引存取"><span class="nav-number">2.5.2.</span> <span class="nav-text">2.索引存取</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-聚簇"><span class="nav-number">2.5.3.</span> <span class="nav-text">3.聚簇</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-6-数据库实施"><span class="nav-number">2.6.</span> <span class="nav-text">2.6 数据库实施</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-7-数据库运行和维护"><span class="nav-number">2.7.</span> <span class="nav-text">2.7 数据库运行和维护</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Part3-数据查询、数据更新、触发器"><span class="nav-number">3.</span> <span class="nav-text">Part3 数据查询、数据更新、触发器</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#3-1-数据查询"><span class="nav-number">3.1.</span> <span class="nav-text">3.1 数据查询</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#0-select"><span class="nav-number">3.1.1.</span> <span class="nav-text">0.select</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-聚集函数"><span class="nav-number">3.1.2.</span> <span class="nav-text">1.聚集函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-where语句"><span class="nav-number">3.1.3.</span> <span class="nav-text">2.where语句</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-ORDER-BY-子句"><span class="nav-number">3.1.4.</span> <span class="nav-text">3.ORDER BY 子句:</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-GROUP-BY-子句"><span class="nav-number">3.1.5.</span> <span class="nav-text">4.GROUP BY 子句</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-not-exists"><span class="nav-number">3.1.6.</span> <span class="nav-text">5.(not) exists</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-连接查询"><span class="nav-number">3.1.7.</span> <span class="nav-text">6.连接查询</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#等值连接："><span class="nav-number">3.1.7.1.</span> <span class="nav-text">等值连接： =</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#自然连接"><span class="nav-number">3.1.7.2.</span> <span class="nav-text">自然连接</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#自身连接"><span class="nav-number">3.1.7.3.</span> <span class="nav-text">自身连接</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#复合条件连接"><span class="nav-number">3.1.7.4.</span> <span class="nav-text">复合条件连接</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#嵌套查询"><span class="nav-number">3.1.7.5.</span> <span class="nav-text">嵌套查询</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-2-数据更新"><span class="nav-number">3.2.</span> <span class="nav-text">3.2 数据更新</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#数据插入"><span class="nav-number">3.2.1.</span> <span class="nav-text">数据插入</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#数据更改"><span class="nav-number">3.2.2.</span> <span class="nav-text">数据更改</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#数据删除"><span class="nav-number">3.2.3.</span> <span class="nav-text">数据删除</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-3基本表，表完整性"><span class="nav-number">3.3.</span> <span class="nav-text">3.3基本表，表完整性</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#基本表"><span class="nav-number">3.3.1.</span> <span class="nav-text">基本表</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#实体完整性"><span class="nav-number">3.3.2.</span> <span class="nav-text">实体完整性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#参照完整性"><span class="nav-number">3.3.3.</span> <span class="nav-text">参照完整性</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-4-视图"><span class="nav-number">3.4.</span> <span class="nav-text">3.4 视图</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#建立视图"><span class="nav-number">3.4.1.</span> <span class="nav-text">建立视图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#删除视图"><span class="nav-number">3.4.2.</span> <span class="nav-text">删除视图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#视图查询"><span class="nav-number">3.4.3.</span> <span class="nav-text">视图查询</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#更新视图"><span class="nav-number">3.4.4.</span> <span class="nav-text">更新视图</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Part4-数据库安全性"><span class="nav-number">4.</span> <span class="nav-text">Part4 数据库安全性</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-概述"><span class="nav-number">4.1.</span> <span class="nav-text">1.概述</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-数据库安全性措施"><span class="nav-number">4.2.</span> <span class="nav-text">2.数据库安全性措施</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-用户身份鉴别"><span class="nav-number">4.3.</span> <span class="nav-text">3.用户身份鉴别</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-存取控制"><span class="nav-number">4.4.</span> <span class="nav-text">4.存取控制</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#自主存取控制"><span class="nav-number">4.4.1.</span> <span class="nav-text">自主存取控制</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#强制存取控制"><span class="nav-number">4.4.2.</span> <span class="nav-text">强制存取控制</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-视图机制"><span class="nav-number">4.5.</span> <span class="nav-text">5.视图机制</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-审计"><span class="nav-number">4.6.</span> <span class="nav-text">6.审计</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-数据加密"><span class="nav-number">4.7.</span> <span class="nav-text">7.数据加密</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#8-其他安全性保护"><span class="nav-number">4.8.</span> <span class="nav-text">8.其他安全性保护</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Part5-数据库恢复技术"><span class="nav-number">5.</span> <span class="nav-text">Part5 数据库恢复技术</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#5-1-事务的基本概念"><span class="nav-number">5.1.</span> <span class="nav-text">5.1 事务的基本概念</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-2-数据库恢复概述"><span class="nav-number">5.2.</span> <span class="nav-text">5.2 数据库恢复概述</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-故障"><span class="nav-number">5.2.1.</span> <span class="nav-text">1.故障</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-恢复的实现技术"><span class="nav-number">5.2.2.</span> <span class="nav-text">2.恢复的实现技术</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#数据转储"><span class="nav-number">5.2.3.</span> <span class="nav-text">数据转储</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#登记日志文件"><span class="nav-number">5.2.4.</span> <span class="nav-text">登记日志文件</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Reference"><span class="nav-number">6.</span> <span class="nav-text">Reference</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>

  </aside>




        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>

<%- partial('totop') %>
<script src="<%- config.root %>js/totop.js"></script>

<div class="copyright" >
  
  &copy;  2017 &mdash; 
  <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Scarlett Huang</span>

  
</div>


 <!-- <div class="powered-by">Powered by <a class="theme-link" href="https://hexo.io">Hexo</a></div>

  <span class="post-meta-divider">|</span>

  <div class="theme-info">Theme &mdash; <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.2</div>
-->

<div class="theme-info">
  <div class="powered-by"></div>
  <span class="post-count">共597.8k字</span>
</div>




<span id="busuanzi_container_site_pv">
<div class="powered-by"></div>
      本站总访问量<span id="busuanzi_value_site_pv"></span>次
  </span>
  <span id="busuanzi_container_site_uv">
  <div class="powered-by"></div>
    本站访客数<span id="busuanzi_value_site_uv"></span>人次
  </span>



        
<div class="busuanzi-count">
  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv">
      <i class="fa fa-user"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
      
    </span>
  

  
    <span class="site-pv">
      <i class="fa fa-eye"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
      
    </span>
  
</div>








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.2"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.2"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.2"></script>



  


  

    
      <script id="dsq-count-scr" src="https://scarletthuang-blog.disqus.com/count.js" async></script>
    

    
      <script type="text/javascript">
        var disqus_config = function () {
          this.page.url = 'http://ScarlettHuang.cn/2018/01/05/数据库系统概论复习笔记/';
          this.page.identifier = '2018/01/05/数据库系统概论复习笔记/';
          this.page.title = '数据库系统概论复习笔记';
        };
        var d = document, s = d.createElement('script');
        s.src = 'https://scarletthuang-blog.disqus.com/embed.js';
        s.setAttribute('data-timestamp', '' + +new Date());
        (d.head || d.body).appendChild(s);
      </script>
    

  




	

		<script type="text/javascript">
		_hcwp = window._hcwp || [];

		_hcwp.push({widget:"Bloggerstream", widget_id: 100332, selector:".hc-comment-count", label: "{\%COUNT%\}" });

		
		_hcwp.push({widget:"Stream", widget_id: 100332, xid: "2018/01/05/数据库系统概论复习笔记/"});
		

		(function() {
		if("HC_LOAD_INIT" in window)return;
		HC_LOAD_INIT = true;
		var lang = (navigator.language || navigator.systemLanguage || navigator.userLanguage || "en").substr(0, 2).toLowerCase();
		var hcc = document.createElement("script"); hcc.type = "text/javascript"; hcc.async = true;
		hcc.src = ("https:" == document.location.protocol ? "https" : "http")+"://w.hypercomments.com/widget/hc/100332/"+lang+"/widget.js";
		var s = document.getElementsByTagName("script")[0];
		s.parentNode.insertBefore(hcc, s.nextSibling);
		})();
		</script>

	












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  
<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script><!-- hexo-inject:begin --><!-- hexo-inject:end -->


  

  
  


  

  


</body>
</html>
